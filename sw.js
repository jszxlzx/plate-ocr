const CACHE='plate-ocr-v4-cache';const ASSETS=['./','./index.html','./manifest.webmanifest','./js/worker.min.js','./wasm/tesseract-core.wasm.js','./wasm/tesseract-core.wasm','./lang/eng.traineddata'];self.addEventListener('install',e=>{e.waitUntil((async()=>{const c=await caches.open(CACHE);try{await c.addAll(ASSETS)}catch(e){}self.skipWaiting()})())});self.addEventListener('activate',e=>{e.waitUntil(self.clients.claim())});self.addEventListener('fetch',e=>{const u=new URL(e.request.url);if(ASSETS.some(p=>u.pathname.endsWith(p.replace('./','/')))){e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request).then(res=>{const cp=res.clone();caches.open(CACHE).then(c=>c.put(e.request,cp));return res;})))}});